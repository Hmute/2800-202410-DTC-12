<%- include('templates/header') %>
<div class="container mt-5">
  <h2 class="text-center mb-4">Calories</h2>
  <div class="calories-container position-relative mx-auto">
    <canvas id="caloriesChart" width="300" height="300"></canvas>
    <div class="calories-info position-absolute top-50 start-50 translate-middle text-center">
      <p class="calorie-text">Goal: <span id="goalCalories"><%= goalCalories.toFixed(0) %></span></p>
      <p class="calorie-text">Consumed: <span id="consumedCalories"><%= consumedCalories.toFixed(0) %></span></p>
      <p class="calorie-text">Remaining: <span id="remainingCalories"><%= remainingCalories.toFixed(0) %></span></p>
    </div>
  </div>
  <p id="caloriesWarning" class="text-danger text-center mt-4" style="display: none;"></p>

  <h2 class="text-center mt-4">Macronutrients</h2>
  <div class="nutrients-container mt-4">
    <div class="nutrient mb-3">
      <label class="form-label">Protein:</label>
      <div class="progress">
        <div class="progress-bar" id="proteinBar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="d-flex justify-content-between mt-2">
        <span><span id="totalProtein"><%= totalProtein.toFixed(1) %></span> g</span>
        <span>/</span>
        <span><span id="goalProtein"><%= goalProtein.toFixed(1) %></span>g</span>
      </div>
      <p id="proteinWarning" class="text-danger" style="display: none;"></p>
    </div>
    <div class="nutrient mb-3">
      <label class="form-label">Carbohydrate:</label>
      <div class="progress">
        <div class="progress-bar bg-info" id="carbsBar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="d-flex justify-content-between mt-2">
        <span><span id="totalCarbs"><%= totalCarbs.toFixed(1) %></span>g</span>
        <span>/</span>
        <span><span id="goalCarbs"><%= goalCarbs.toFixed(1) %></span> g</span>
      </div>
      <p id="carbsWarning" class="text-danger" style="display: none;"></p>
    </div>
    <div class="nutrient mb-3">
      <label class="form-label">Fat:</label>
      <div class="progress">
        <div class="progress-bar bg-warning" id="fatsBar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="d-flex justify-content-between mt-2">
        <span><span id="totalFats"><%= totalFats.toFixed(1) %></span> g</span>
        <span>/</span>
        <span><span id="goalFats"><%= goalFats.toFixed(1) %></span> g</span>
      </div>
      <p id="fatsWarning" class="text-danger" style="display: none;"></p>
    </div>
  </div>
</div>
<%- include('templates/footer') %>

<!--  Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- macroProgression JavaScript file -->
<script src="/script/macroProgression.js"></script>

<style>
  .calories-container {
    width: 100%;
    max-width: 300px;
  }

  @media (max-width: 768px) {
    .calories-info p {
        font-size: 3.5vw;
    }

    .calories-info p span {
        font-size: 3.5vw;
    }
  }

  @media (max-width: 576px) {
    .calories-info p {
        font-size: 4vw;
    }

    .calories-info p span {
        font-size: 4vw;
    }
  }

  @media (max-width: 365px) {
    .calories-info p {
        font-size: 6vw;
        padding-top: 20px;
    }

    .calories-info p span {
        font-size: 6vw;
        padding-top: 20px;
    }
  }

  .calorie-text {
    margin: 0;
  }

  .nutrients-container {
    width: 100%;
  }

  .nutrient {
    width: 100%;
  }

  .progress-bar {
    transition: width 0.6s ease;
  }

  .d-flex {
    display: flex;
    justify-content: space-between;
  }
</style>
